<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Quake III Arena</title>
		<style>
			html,body{height:100%;padding:0;margin:0;background:#000}
			#viewport-frame{position:absolute;top:0;left:0;bottom:0;right:0;overflow:hidden}
		</style>
		<script type="text/javascript" src="Quake3Game.js"></script>
		<script type="text/javascript">

			function getQueryCommands() {
				var search = /([^&=]+)/g;
				var query  = window.location.search.substring(1);

				var args = [];

				var match;
				while (match = search.exec(query)) {
					var val = decodeURIComponent(match[1]);
					val = val.split(' ');
					val[0] = '+' + val[0];
					args.push.apply(args, val);
				}

				return args;
			}

			window.onload = function()
				{
				function resizeViewport()
					{
					if (!ioq3.canvas){return}
					if ((document["webkitFullScreenElement"] || document["webkitFullscreenElement"] || document["mozFullScreenElement"] || document["mozFullscreenElement"] || document["fullScreenElement"] || document["fullscreenElement"])){return}
					ioq3.setCanvasSize(ioq3.viewport.offsetWidth, ioq3.viewport.offsetHeight);
					}

				ioq3.viewport = document.getElementById("viewport-frame");
				ioq3.elementPointerLock = true;
				window.addEventListener("resize", resizeViewport);

				var args = ["+set", "fs_cdn", "", "+set", "sv_master1", ""];
				args.push.apply(args, getQueryCommands());
				ioq3.callMain(args);
				};
		</script>
	</head>
	<body>
		<div id="viewport-frame"></div>
	</body>
</html>